<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Waste Warrior</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-96W6TB0Z9Z"></script>
<script src="script.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-96W6TB0Z9Z');
</script>
</head>

<body>
    <div class="container">
        <header>
            <h1>FOOD WASTE WARRIOR</h1>
            <p>Help in the global fight against food waste</p>
            <p><a href="#">Lunch Buffet for MDDI Staff Event on 6 Nov 2024</a></p>
            <p>Please take 5 min to select how much you will be eating</p>
        </header>

        <!-- New Table for Additional Questions -->
        <div class="questionnaire">
            <table class="sleek-table">
                <tr>
                    <td>Are you having lunch with us?</td>
                    <td>
                        <label><input type="radio" name="lunch" value="yes"> Yes</label>
                        <label><input type="radio" name="lunch" value="no"> No</label>
                    </td>
                </tr>
                <tr>
                    <td>Indicate your dietary requirement, if any. (All food items are halal)</td>
                    <td>
                        <label><input type="radio" name="diet" value="no"> No</label>
                        <label><input type="radio" name="diet" value="vegetarian"> Vegetarian</label>
                        <label><input type="radio" name="diet" value="allergies"> Allergies</label>
                        <input type="text" name="allergies" placeholder="Specify your allergies" class="allergy-input">
                    </td>
                </tr>
            </table>
        </div>

        <!-- Button and Result Display for Calculation -->
        <button onclick="calculateCatering()">Calculate</button>

        <div id="result"></div>

        <aside>
            <h2>1 Portion Means:</h2>
            <p><strong>For Food: 1 full laddle/tong</strong></p>
            <p><strong>For Dessert: 1 full disposable bowl</strong></p>
            <p><strong>For Beverage: 1 full disposable cup</strong></p>
        </aside>
    </div>
    
    <!-- JavaScript Calculation Logic -->
    <script>
        function calculateCatering() {
            // Variables based on existing data
            let currentCateredPortions = 18;
            let currentTotalCost = 360;
            let currentCostSavings = 40;
            const perPersonCost = 20;

            // Track if the current user should be counted as a full portion
            let userIsFullPortion = false;

            // Get all selected radio buttons for the user's choices
            const portionSelections = document.querySelectorAll('input[type="radio"]:checked');

            // Check each selected portion
            portionSelections.forEach(selection => {
                // If user selects 1/2 or 1 portion for any item, mark as full portion
                if (selection.value === "1/2" || selection.value === "1") {
                    userIsFullPortion = true;
                }
            });

            // Calculate new totals based on the user's portion choices
            if (userIsFullPortion) {
                // User is counted as an additional portion
                currentCateredPortions += 1;
                currentTotalCost += perPersonCost;
                // Cost savings remain unchanged
            } else {
                // User is not counted as an additional portion
                currentCostSavings += 20; // Increase savings by one person's cost
            }

            // Display results
            document.getElementById("result").innerHTML = `
                <p>Total catered portions: ${currentCateredPortions}</p>
                <p>Total cost: $${currentTotalCost}</p>
                <p>Cost savings: $${currentCostSavings}</p>
            `;

            localStorage.setItem("cateredPortions", currentCateredPortions);
            localStorage.setItem("totalCost", currentTotalCost);
            localStorage.setItem("costSavings", currentCostSavings);
            window.location.href = "/thankyou.html";
        }
       


    </script>

</body>
</html>
